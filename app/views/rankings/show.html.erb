<%= @ranking.name %>

<%= form_with url: ranking_ranking_participations_path(ranking_id: @ranking.id), method: :post do |form| %>
  <%= form.submit '参加' %>
<% end %>

<% if perticipated?(@ranking, current_player) %>
  <%= link_to 'スコアを登録する', new_ranking_score_path(ranking_id: @ranking.id) %>
<% end %>

<table>
  <thead>
    <th>Rank</th>
    <th>Name</th>
    <th>Score</th>
  </thead>
  <tbody>
    <% @ranking.ranking_participations.each_with_index do |participant, idx| %>
      <tr>
        <td><%= idx %></td>
        <td><%= participant.player.email %></td>
        <td><%= participant.scores.max %></td>
      </tr>
    <% end %>
  </tbody>
</table>
